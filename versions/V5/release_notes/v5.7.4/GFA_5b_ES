Graphical Forecast for Aviation (GFA) Changes

  GFA user interface enhancements

        A hazard number has been added to the GFA element.  This gives the
	user the means to link GFA elements depicting the same phenomena at 
	different forecast times.  This linkage enables the "auto-edit" 
	feature (described below).  The hazard number is displayed in the 
	GFA label on the first line at the right.  

	Linkages have been created between the GFA GUI, the Layer Control,
	the Filter Control, and the data loop.  These linkages are described
	below.

	1)  GFA/AIRMET/SIGMET Type/Area to Layer Control.  When the GFA (or
	AIRMET/SIGMET) GUI starts an effort is made to match the current layer
	name to one of the Type/Area menu entries.  If an exact match can
        be made between the layer name and one of the Type/Area menu entries,
        then that entry will be automatically selected in the GFA GUI.  

        If the user changes the Type/Area menu selection in the GFA GUI, and if 
	there is a matching layer by the same name, then the Layer Control will 
	make that the active layer.  This means that if the user changes the 
	Type for a GFA from Turb to Ice, the layer control will change the 
	active layer to the layer named Ice (if there is one).  The layer names 
	can be set in an .lpf file or manually edited.  The Type/Area menu 
	entries are defined in the gfa.tbl, airmet.tbl, and sigmet.tbl tables.
	
        2)  GFA/AIRMET/SIGMET Forecast Hour to Filter Control.  When the GFA 
        (or AIRMET/SIGMET) GUI starts, an effort is made to match the forecast
        hour with the first selected time in the Filter Control GUI.  If an 
        exact match of the first filter time string with one of the forecast
        hour menu entries can be made, then that menu entry will be the
	selected forecast time in the GFA GUI.  Note that this is an _exact_ 
	match.  The 0-3, 3-6, and 0-6 filter times are for smears and will not 
	match individual hour(s).

        If the user selects a new forecast hour in the GFA GUI, and that time
        has not already been selected in the filter control, it will be turned 
	on.  No other times will be turned off, however.

        3)  GFA/AIRMET/SIGMET GUI to data loop.	 If GFA GUI is displayed for
        drawing new elements, and the user steps to a different data loop, the
        GFA GUI will be automatically restarted.  Any GFA element that was 
        only partially defined (not all points were selected) will be
        lost.  However if all the points were defined but the text was not
        yet placed, the text will be positioned in the center of the GFA.

        
        An automatic editing (auto-edit) capability has been added using the 
        hazard number.  It works in concert with the filter control.  Assume 
	there are GFAs with the same hazard number drawn at hours 0, 3, and 6.
	Select the 0 time in the filter, and select the 0 hour GFA.  The GFA
	GUI will be started and will allow the GFA element to be edited.  Now,
	with the 0 hour element still selected, step to hour 3 in the filter 
	using the "]" hotkey.  The filter will turn off hour 0 and turn on hour 
	3.  The GFA element at hour 3 will be automatically selected for 
	editing.  Stepping once more with the "]" key will select the 6 hour 
	GFA.

  
  Smear Improvements

  	A small GUI has been added to the Smear action.  This GUI gives
	the user the means to control the color of the resulting new element
	generated by the smear.  Additional element attribute controls will be
	added in later releases.

	The new smeared element now has the worst case flight levels 
	(highest top and lowest bottom) of all the selected snapshot elements.
	For the GFA element the smear also includes the worst case description
	value.  Worst case is defined as lower in the table driven list of
	descriptions (contained in gfa.tbl).


  Changes to the Layer GUI

        The Layer Control GUI now has a single button to control the "All On/
	All Off" feature.  It will start at "All Off" and change to "All On" 
	after it is pressed, and change back to "All Off" with the next
	press.


  Add Time Filter in PGEN

  	A Time Filter mechanism has been added to PGEN.  This provides a 
	means to selectively display GFA, AIRMET, and non-convective SIGMET
	elements based upon their forecast time.
	
	The filter control window is started from the PGEN palette using the 
	"Filter" button under the Actions (2nd group from the top).  The 
	filter control displays all the specified times in the filter.tbl 
	(located in $GEMTBL/pgen/).

	The filter control starts with no times selected.  If there are any
	GFA elements drawn, they will disappear when the filter control starts
	up.  The elements still exist, however they are not displayed.  The 
	user can select one or more display times by checking one or more 
	check boxes.  As soon as a check box is turned on all GFA, AIRMETs 
	and SIGMETs which have a forecast hour that exactly matches one of the 
	selected times will be displayed.  Please note this is an exact match.
	The "0" time matches the "0" forecast hour, while the "0-6" time (a 
	smear time) matches the forecast time of "0-6", and does not match "0",
	"3", or "6".

	The Filter Control includes hot keys to enable the user to step from 
	one time to the next.  These are the "[" and "]" keys.  The "[" key 
	steps the control from right to left and the the "]" steps from
	left to right.  The Filter Control also includes an "All On"/"All Off" 
	button to simplify operation.


  Implement Time Filter in GPMAP

        The VGFILE parameter now includes a filter.  This can be used to 
	selectively display the GFA/AIRMET/SIGMET elements in a vg file based 
	upon element forecast time.  

	The filter string is a series of times separated by ";".  So a filter 
	string of "0;3;6" would display only GFA elements that have a forecast 
	time of 0, 3, or 6.  Note that this time match must be exact -- "0-6" 
	would display a smeared GFA but not the snapshot GFAs at 0, 3, and 6.  

	Elements that do not have a forecast time (meaning all elements 
        except for the GFA, AIRMET, and non-convective SIGMET will be unaffected
	by the filter.  They will always be displayed.


  Rename FROM line text file.  

	The From Line for the new AIRMETs (class MET, not class SIGMET) has
	been changed.  The From Line is now saved into a file with this naming
	convention:

		ZULU_#.frm	(for icing areas)
		TANGO_#.frm	(for turbulence areas)
		SIERRA_#.frm	(for all other AIRMET area types)

	The # will be the AIRMET's sequence number.


  Interpolation Enhancements

	Interpolation is now restricted to work only on GFA/AIRMET/SIGMET 
	elements of the same Area/Type.  Thus GFA/Turb elements can only be
	interpolated with other GFA/Turb elements.  

	The interpolation tool now provides linear interpolation of the flight 
	levels.  It also uses the worst case description value for GFA elements.
	The worst case value is assumed to be the one lower in the list of
	values contained in the gfa.tbl table.

	
  Use SFC in GFA (PGEN)
  
	The string "SFC", meaning surface, is now available for use in the 
	bottom flight level of the GFA/AIRMET/SIGMET GUI.  The user can type in
	"SFC" or some portion thereof (case does not matter), and the "SFC" 
	will be automatically completed (and converted to upper case).  SFC is
	assumed to be a value of 0 with regards to the interpolation and smear
	tools.
